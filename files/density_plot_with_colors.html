<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Density Plot</title>
    <script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
</head>
<body>
    <div id="plot" style="width:100%; height:600px;"></div>

    <div style="margin: 10px 0;">
        <label for="scientific-colormap">Scientific Colormap:</label>
        <select id="scientific-colormap"></select>
    </div>

    <div style="margin: 10px 0;">
        <label for="regular-colormap">Regular Colormap:</label>
        <select id="regular-colormap"></select>
    </div>

    <script>
        // Load the JSON file dynamically for density data
        fetch('density_data.json')
            .then(response => response.json())
            .then(densityData => {
                const x_domain = densityData.x_domain;
                const y_domain = densityData.y_domain;
                const f_density = densityData.f_density;

                // Create the initial plot
                const initialColormap = 'batlow'; // Default scientific colormap
                Plotly.newPlot('plot', [{
                    z: f_density,
                    x: x_domain,
                    y: y_domain,
                    type: 'surface',
                    colorscale: initialColormap
                }], {
                    title: "Interactive Density Plot",
                    scene: {
                        xaxis: { title: "x", range: [Math.min(...x_domain), Math.max(...x_domain)] },
                        yaxis: { title: "y", range: [Math.min(...y_domain), Math.max(...y_domain)] },
                        zaxis: { title: "Density", range: [-1, 2] },
                        aspectmode: "cube"
                    }
                });

                // Load Crameri color scales
                fetch('cmcrameri_colors.json')
                    .then(response => response.json())
                    .then(colorScales => {
                        const scientificColormapSelect = document.getElementById('scientific-colormap');
                        // Populate scientific dropdown
                        Object.keys(colorScales).forEach(cmapName => {
                            const option = document.createElement('option');
                            option.value = cmapName;
                            option.textContent = cmapName.charAt(0).toUpperCase() + cmapName.slice(1);
                            scientificColormapSelect.appendChild(option);
                        });

                        // Update scientific colormap dynamically
                        scientificColormapSelect.onchange = function () {
                            const selectedColormap = this.value;
                            const colorscale = colorScales[selectedColormap];
                            Plotly.update('plot', {}, { colorscale: [colorscale] }, 0);
                        };
                    })
                    .catch(error => console.error('Error loading scientific color scales:', error));

                // Populate regular colormap dropdown
                const regularColormapSelect = document.getElementById('regular-colormap');
                const regularColormaps = ['Jet', 'Rainbow', 'Inferno', 'Viridis', 'Cividis']; // Regular colormaps
                regularColormaps.forEach(cmap => {
                    const option = document.createElement('option');
                    option.value = cmap;
                    option.textContent = cmap;
                    regularColormapSelect.appendChild(option);
                });

                // Update regular colormap dynamically
                regularColormapSelect.onchange = function () {
                    const selectedColormap = this.value;
                    Plotly.update('plot', {}, { colorscale: [selectedColormap] }, 0);
                };
            })
            .catch(error => console.error('Error loading density data:', error));
    </script>
</body>
</html>
