<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Density Plot</title>
    <script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
</head>
<body>
    <div id="plot" style="width:100%; height:600px;"></div>
    <label for="colormap">Choose a colormap:</label>
    <select id="colormap" onchange="updateColormap()">
        <option value="Viridis">Viridis</option>
        <option value="Cividis">Cividis</option>
        <option value="Plasma">Plasma</option>
        <option value="Inferno">Inferno</option>
    </select>

    <script>
        // Load the JSON file dynamically
        fetch('density_data.json') // Update the path if it's in a subdirectory, e.g., '/files/density_data.json'
            .then(response => response.json())
            .then(data => {
                const x_domain = data.x_domain;
                const y_domain = data.y_domain;
                const f_density = data.f_density;

                // Create the initial plot
                const initialColormap = 'Viridis';
                Plotly.newPlot('plot', [{
                    z: f_density,
                    x: x_domain,
                    y: y_domain,
                    type: 'surface',
                    colorscale: initialColormap
                }], {
                    title: "Interactive Density Plot",
                    scene: {
                        xaxis: { title: "x", range: [Math.min(...x_domain), Math.max(...x_domain)] },
                        yaxis: { title: "y", range: [Math.min(...y_domain), Math.max(...y_domain)] },
                        zaxis: { title: "Density", range: [-1, 2] },
                        aspectmode: "cube"
                    }
                });

                // Function to update the colormap dynamically
                document.getElementById('colormap').onchange = function () {
                    const selectedColormap = this.value;
                    Plotly.restyle('plot', { colorscale: selectedColormap });
                };
            })
            .catch(error => console.error('Error loading density data:', error));
    </script>
</body>
</html>
